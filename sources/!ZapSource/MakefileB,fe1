# Make file for Zap Text Editor
# (c) Dominic Symes

BUILD	= -PD "BUILD SETS \"sja-2\""
# "-n" automatically appended
# leave blank if to use "patch-n" or "[TEST n]"

Linkflags	= -o $@ -B 0 -bin
OBJECTS1	= o.dispatch o.modulebits o.redraw o.template o.messages
OBJECTS2	= o.cursors o.createwind o.altertxt o.search o.commands o.execute o.update
OBJECTS3	= o.mode0 o.mode1+2 o.mode3 o.mode4 o.mode4dis o.modebits o.mode11 o.softwrap
OBJECTS4	= o.keybits o.strings o.createfile o.undo o.menus
OBJECTS5	= o.minibuff o.startcode o.startup o.heap o.boxes o.fonts o.exceptions
OBJECTS		= o.objects1 o.objects2 o.objects3 o.objects4 o.objects5
Objasmflags	= -o $@ -depend !Depend -throwback -stamp -quit
#Objasmflags	= -to $@ -depend !Depend -stamp -quit -from
asflags		= -objasm -To $@ -From
TARGET		= Zap
ZapS		= <ZapSource$Dir>
plink		= link -o $@ -aof

.SUFFIXES: .o .s
.s.o:;		objasm $(BUILD) $(Objasmflags) s.$*
#.s.o:;		as $(asflags) s.$*

# Final target:

Zap:		$(OBJECTS)
		link $(Linkflags) $(OBJECTS)
		Settype <ZapSource$Dir>.$(TARGET) Module
		Run $(ZapS).data.MCopy $(ZapS).$(TARGET) ZapCode:Zap
		@Echo Finished

o.objects1:	$(OBJECTS1)
		$(plink) $(OBJECTS1)

o.objects2:	$(OBJECTS2)
		$(plink) $(OBJECTS2)

o.objects3:	$(OBJECTS3)
		$(plink) $(OBJECTS3)

o.objects4:	$(OBJECTS4)
		$(plink) $(OBJECTS4)

o.objects5:	$(OBJECTS5)
		$(plink) $(OBJECTS5)

# Dependencies:
o.Dispatch: s.Dispatch
o.ModuleBits: s.ModuleBits
o.Redraw: s.Redraw
o.Template: s.Template
o.Commands: s.Commands
o.Cursors: s.Cursors
o.CreateFile: s.CreateFile
o.CreateWind: s.CreateWind
o.Exceptions: s.Exceptions
o.Execute: s.Execute
o.Mode0: s.Mode0
o.Mode1: s.Mode1
o.Mode2: s.Mode2
o.Mode3: s.Mode3
o.Mode11: s.Mode11
o.Search: s.Search
o.Keybits: s.Keybits
o.Modebits: s.Modebits
o.Strings: s.Strings
o.Undo: s.Undo
o.Menus: s.Menus
o.Boxes: s.Boxes
o.Minibuff: s.Minibuff
o.StartCode: s.StartCode
o.Startup: s.Startup
o.Heap: s.Heap
o.Fonts: s.Fonts
o.Softwrap: s.Softwrap
o.Update: s.Update

h.ZapHeader:	h.System h.ZapLibrary h.Macros
# Uncomment the following line for a complete make from scratch
#		Stamp h.ZapHeader

# Dynamic dependencies:
o.dispatch: s.dispatch
o.strings: s.strings
o.strings: h.ZapHeader
o.strings: h.System
o.strings: h.ZapLibrary
o.strings: h.ZapVars
o.strings: h.Macros
o.strings: h.Heap
o.modulebits: s.modulebits
o.modulebits: h.ZapHeader
o.modulebits: h.System
o.modulebits: h.ZapLibrary
o.modulebits: h.ZapVars
o.modulebits: h.Macros
o.modulebits: h.Messages
o.modulebits: h.Strings
o.modulebits: h.Commands
o.modulebits: h.Execute
o.modulebits: h.Dispatch
o.modulebits: h.Mode0
o.modulebits: h.Mode1
o.modulebits: h.Mode2
o.modulebits: h.Mode3
o.modulebits: h.Mode4
o.modulebits: h.ModeBits
o.modulebits: h.StartCode
o.modulebits: h.Heap
o.modulebits: h.Messages
o.modulebits: h.Version
o.redraw: s.redraw
o.redraw: h.ZapHeader
o.redraw: h.System
o.redraw: h.ZapLibrary
o.redraw: h.ZapVars
o.redraw: h.Macros
o.redraw: h.Messages
o.redraw: h.MiniBuff
o.redraw: h.Heap
o.redraw: h.ModeBits
o.redraw: h.Strings
o.redraw: h.Cursors
o.redraw: h.CreateWind
o.redraw: h.CreateFile
o.redraw: h.AlterTxt
o.redraw: h.Fonts
o.redraw: h.TMTVars
o.redraw: h.KeyBits
o.redraw: h.SoftWrap
o.template: s.template
o.template: h.ZapHeader
o.template: h.System
o.template: h.ZapLibrary
o.template: h.ZapVars
o.template: h.Macros
o.template: h.Messages
o.template: h.CreateFile
o.template: h.CreateWind
o.template: h.AlterTxt
o.template: h.Strings
o.template: h.Heap
o.template: h.ModuleBits
o.template: h.MiniBuff
o.template: h.Cursors
o.template: h.Redraw
o.template: h.ModeBits
o.template: h.KeyBits
o.template: h.Menus
o.template: h.Undo
o.template: h.Search
o.template: h.StartCode
o.template: h.Boxes
o.template: h.TMTVars
o.messages: s.messages
o.messages: h.ZapHeader
o.messages: h.System
o.messages: h.ZapLibrary
o.messages: h.ZapVars
o.messages: h.Macros
o.messages: h.Heap
o.messages: h.Strings
o.cursors: s.cursors
o.cursors: h.ZapHeader
o.cursors: h.System
o.cursors: h.ZapLibrary
o.cursors: h.ZapVars
o.cursors: h.Macros
o.cursors: h.Heap
o.cursors: h.Redraw
o.cursors: h.CreateWind
o.cursors: h.ModeBits
o.cursors: h.KeyBits
o.cursors: h.MiniBuff
o.cursors: h.AlterTxt
o.cursors: h.Strings
o.cursors: h.StartCode
o.cursors: h.Commands
o.cursors: h.Execute
o.cursors: h.CreateFile
o.cursors: h.TMTVars
o.cursors: h.Search
o.createwind: s.createwind
o.createwind: h.ZapHeader
o.createwind: h.System
o.createwind: h.ZapLibrary
o.createwind: h.ZapVars
o.createwind: h.Macros
o.createwind: h.Messages
o.createwind: h.Template
o.createwind: h.Heap
o.createwind: h.Strings
o.createwind: h.CreateFile
o.createwind: h.ModeBits
o.createwind: h.Cursors
o.createwind: h.Redraw
o.createwind: h.MiniBuff
o.createwind: h.KeyBits
o.createwind: h.Strings
o.createwind: h.StartCode
o.createwind: h.Update
o.createwind: h.Commands
o.createwind: h.TMTVars
o.altertxt: s.altertxt
o.altertxt: h.ZapHeader
o.altertxt: h.System
o.altertxt: h.ZapLibrary
o.altertxt: h.ZapVars
o.altertxt: h.Macros
o.altertxt: h.Heap
o.altertxt: h.Strings
o.altertxt: h.Cursors
o.altertxt: h.ModeBits
o.altertxt: h.CreateFile
o.altertxt: h.CreateWind
o.altertxt: h.Redraw
o.altertxt: h.Mode0
o.altertxt: h.MiniBuff
o.altertxt: h.SoftWrap
o.altertxt: h.StartCode
o.altertxt: h.TMTVars
o.altertxt: h.Undo
o.altertxt: h.Update
o.search: s.search
o.search: h.ZapHeader
o.search: h.System
o.search: h.ZapLibrary
o.search: h.ZapVars
o.search: h.Macros
o.search: h.Messages
o.search: h.Template
o.search: h.Heap
o.search: h.Strings
o.search: h.ModeBits
o.search: h.CreateWind
o.search: h.CreateFile
o.search: h.Cursors
o.search: h.AlterTxt
o.search: h.MiniBuff
o.search: h.Commands
o.search: h.Redraw
o.search: h.KeyBits
o.search: h.TMTVars
o.commands: s.commands
o.commands: h.ZapHeader
o.commands: h.System
o.commands: h.ZapLibrary
o.commands: h.ZapVars
o.commands: h.Macros
o.commands: h.Messages
o.commands: h.Template
o.commands: h.CreateWind
o.commands: h.KeyBits
o.commands: h.MiniBuff
o.commands: h.Heap
o.commands: h.ModeBits
o.commands: h.Cursors
o.commands: h.AlterTxt
o.commands: h.Search
o.commands: h.CreateFile
o.commands: h.Undo
o.commands: h.Redraw
o.commands: h.Strings
o.commands: h.Menus
o.commands: h.StartUp
o.commands: h.StartCode
o.commands: h.ModuleBits
o.commands: h.Fonts
o.commands: h.Mode1
o.commands: h.Mode2
o.commands: h.Mode4
o.commands: h.Mode11
o.commands: h.Update
o.commands: h.TMTVars
o.commands: h.Execute
o.commands: h.Boxes
o.execute: s.execute
o.execute: h.ZapHeader
o.execute: h.System
o.execute: h.ZapLibrary
o.execute: h.ZapVars
o.execute: h.Macros
o.execute: h.Messages
o.execute: h.Template
o.execute: h.CreateWind
o.execute: h.KeyBits
o.execute: h.MiniBuff
o.execute: h.Heap
o.execute: h.ModeBits
o.execute: h.Cursors
o.execute: h.AlterTxt
o.execute: h.Search
o.execute: h.CreateFile
o.execute: h.Undo
o.execute: h.Redraw
o.execute: h.Strings
o.execute: h.Menus
o.execute: h.StartUp
o.execute: h.StartCode
o.execute: h.ModuleBits
o.execute: h.Fonts
o.execute: h.Mode1
o.execute: h.Mode2
o.execute: h.Mode4
o.execute: h.Mode11
o.execute: h.Update
o.execute: h.TMTVars
o.execute: h.Boxes
o.execute: h.Commands
o.update: s.update
o.update: h.ZapHeader
o.update: h.System
o.update: h.ZapLibrary
o.update: h.ZapVars
o.update: h.Macros
o.update: h.AlterTxt
o.update: h.Heap
o.update: h.ModeBits
o.update: h.Redraw
o.update: h.CreateWind
o.update: h.Cursors
o.update: h.Mode0
o.mode0: s.mode0
o.mode0: h.ZapHeader
o.mode0: h.System
o.mode0: h.ZapLibrary
o.mode0: h.ZapVars
o.mode0: h.Macros
o.mode0: h.Commands
o.mode0: h.AlterTxt
o.mode0: h.StartCode
o.mode0: h.Heap
o.mode0: h.ModeBits
o.mode0: h.Redraw
o.mode0: h.Cursors
o.mode0: h.Template
o.mode0: h.Mode1
o.mode0: h.SoftWrap
o.mode0: h.TMTVars
o.mode1: s.mode1
o.mode1: h.ZapHeader
o.mode1: h.System
o.mode1: h.ZapLibrary
o.mode1: h.ZapVars
o.mode1: h.Macros
o.mode1: h.Messages
o.mode1: h.Mode0
o.mode1: h.Commands
o.mode1: h.Execute
o.mode1: h.AlterTxt
o.mode1: h.Cursors
o.mode1: h.Menus
o.mode1: h.ModeBits
o.mode1: h.Redraw
o.mode1: h.Strings
o.mode1: h.MiniBuff
o.mode1: h.Mode2
o.mode1: h.Mode3
o.mode1: h.Mode4
o.mode1: h.TMTVars
o.mode2: s.mode2
o.mode2: h.ZapHeader
o.mode2: h.System
o.mode2: h.ZapLibrary
o.mode2: h.ZapVars
o.mode2: h.Macros
o.mode2: h.Commands
o.mode2: h.Execute
o.mode2: h.Mode0
o.mode2: h.Mode1
o.mode2: h.Mode3
o.mode2: h.Mode4
o.mode2: h.AlterTxt
o.mode2: h.ModeBits
o.mode2: h.MiniBuff
o.mode2: h.Menus
o.mode2: h.Redraw
o.mode2: h.Strings
o.mode2: h.Heap
o.mode2: h.KeyBits
o.mode2: h.Cursors
o.mode3: s.mode3
o.mode3: h.ZapHeader
o.mode3: h.System
o.mode3: h.ZapLibrary
o.mode3: h.ZapVars
o.mode3: h.Macros
o.mode3: h.Mode0
o.mode3: h.Mode1
o.mode3: h.AlterTxt
o.mode3: h.ModeBits
o.mode3: h.Redraw
o.mode3: h.Cursors
o.mode4: s.mode4
o.mode4: h.ZapHeader
o.mode4: h.System
o.mode4: h.ZapLibrary
o.mode4: h.ZapVars
o.mode4: h.Macros
o.mode4: h.Messages
o.mode4: h.AlterTxt
o.mode4: h.Commands
o.mode4: h.Execute
o.mode4: h.CreateWind
o.mode4: h.Cursors
o.mode4: h.Heap
o.mode4: h.KeyBits
o.mode4: h.Menus
o.mode4: h.MiniBuff
o.mode4: h.Mode0
o.mode4: h.Mode1
o.mode4: h.Mode2
o.mode4: h.ModeBits
o.mode4: h.ModuleBits
o.mode4: h.Redraw
o.mode4: h.Strings
o.mode4: h.Update
o.mode4: h.TMTVars
o.mode4dis: s.mode4dis
o.mode4dis: h.ZapHeader
o.mode4dis: h.System
o.mode4dis: h.ZapLibrary
o.mode4dis: h.ZapVars
o.mode4dis: h.Macros
o.mode4dis: h.Messages
o.mode4dis: h.AlterTxt
o.mode4dis: data.clib_names
o.mode4dis: data.clib_names
o.mode4dis: data.clib_names
o.modebits: s.modebits
o.modebits: h.ZapHeader
o.modebits: h.System
o.modebits: h.ZapLibrary
o.modebits: h.ZapVars
o.modebits: h.Macros
o.modebits: h.Messages
o.modebits: h.Fonts
o.modebits: h.Mode0
o.modebits: h.CreateFile
o.modebits: h.CreateWind
o.modebits: h.Search
o.modebits: h.Strings
o.modebits: h.Redraw
o.modebits: h.Heap
o.modebits: h.AlterTxt
o.modebits: h.Commands
o.modebits: h.TMTVars
o.modebits: h.Mode4
o.mode11: s.mode11
o.mode11: h.ZapHeader
o.mode11: h.System
o.mode11: h.ZapLibrary
o.mode11: h.ZapVars
o.mode11: h.Macros
o.mode11: h.Messages
o.mode11: h.Strings
o.mode11: h.CreateWind
o.mode11: h.CreateFile
o.mode11: h.AlterTxt
o.mode11: h.Heap
o.mode11: h.Redraw
o.mode11: h.ModeBits
o.mode11: h.Cursors
o.mode11: h.Commands
o.mode11: h.Execute
o.softwrap: s.softwrap
o.softwrap: h.ZapHeader
o.softwrap: h.System
o.softwrap: h.ZapLibrary
o.softwrap: h.ZapVars
o.softwrap: h.Macros
o.softwrap: h.Heap
o.softwrap: h.ModeBits
o.softwrap: h.Redraw
o.softwrap: h.Cursors
o.softwrap: h.Mode0
o.keybits: s.keybits
o.keybits: h.ZapHeader
o.keybits: h.System
o.keybits: h.ZapLibrary
o.keybits: h.ZapVars
o.keybits: h.Macros
o.keybits: h.Strings
o.keybits: h.CreateFile
o.keybits: h.Heap
o.keybits: h.Menus
o.keybits: h.Commands
o.keybits: h.Execute
o.keybits: h.ModeBits
o.keybits: h.MiniBuff
o.keybits: h.Cursors
o.keybits: h.Template
o.keybits: h.TMTVars
o.createfile: s.createfile
o.createfile: h.ZapHeader
o.createfile: h.System
o.createfile: h.ZapLibrary
o.createfile: h.ZapVars
o.createfile: h.Macros
o.createfile: h.Template
o.createfile: h.KeyBits
o.createfile: h.Cursors
o.createfile: h.Heap
o.createfile: h.ModeBits
o.createfile: h.AlterTxt
o.createfile: h.Strings
o.createfile: h.CreateWind
o.createfile: h.Cursors
o.createfile: h.Undo
o.createfile: h.Redraw
o.createfile: h.MiniBuff
o.createfile: h.TMTVars
o.undo: s.undo
o.undo: h.ZapHeader
o.undo: h.System
o.undo: h.ZapLibrary
o.undo: h.ZapVars
o.undo: h.Macros
o.undo: h.TMTVars
o.undo: h.AlterTxt
o.undo: h.CreateFile
o.undo: h.Heap
o.undo: h.CreateWind
o.menus: s.menus
o.menus: h.ZapHeader
o.menus: h.System
o.menus: h.ZapLibrary
o.menus: h.ZapVars
o.menus: h.Macros
o.menus: h.Messages
o.menus: h.Cursors
o.menus: h.ModeBits
o.menus: h.Strings
o.menus: h.Heap
o.menus: h.CreateFile
o.menus: h.Template
o.menus: h.Commands
o.menus: h.Execute
o.menus: h.Redraw
o.menus: h.MiniBuff
o.menus: h.CreateWind
o.menus: h.StartUp
o.menus: h.KeyBits
o.menus: h.ModuleBits
o.menus: h.StartCode
o.menus: h.TMTVars
o.menus: h.Messages
o.minibuff: s.minibuff
o.minibuff: h.ZapHeader
o.minibuff: h.System
o.minibuff: h.ZapLibrary
o.minibuff: h.ZapVars
o.minibuff: h.Macros
o.minibuff: h.Messages
o.minibuff: h.CreateFile
o.minibuff: h.Heap
o.minibuff: h.Strings
o.minibuff: h.Template
o.minibuff: h.CreateWind
o.minibuff: h.Cursors
o.minibuff: h.Commands
o.minibuff: h.Execute
o.minibuff: h.StartCode
o.startcode: s.startcode
o.startcode: h.ZapHeader
o.startcode: h.System
o.startcode: h.ZapLibrary
o.startcode: h.ZapVars
o.startcode: h.Macros
o.startcode: h.Messages
o.startcode: h.StartUp
o.startcode: h.ModeBits
o.startcode: h.Menus
o.startcode: h.Heap
o.startcode: h.Template
o.startcode: h.CreateFile
o.startcode: h.Strings
o.startcode: h.MiniBuff
o.startcode: h.CreateWind
o.startcode: h.Cursors
o.startcode: h.KeyBits
o.startcode: h.Menus
o.startcode: h.Redraw
o.startcode: h.AlterTxt
o.startcode: h.Exceptions
o.startcode: h.TMTVars
o.startcode: h.Commands
o.startcode: h.Execute
o.startup: s.startup
o.startup: h.ZapHeader
o.startup: h.System
o.startup: h.ZapLibrary
o.startup: h.ZapVars
o.startup: h.Macros
o.startup: h.Messages
o.startup: h.Heap
o.startup: h.Redraw
o.startup: h.KeyBits
o.startup: h.ModeBits
o.startup: h.CreateFile
o.startup: h.Strings
o.startup: h.Version
o.heap: s.heap
o.heap: h.ZapHeader
o.heap: h.System
o.heap: h.ZapLibrary
o.heap: h.ZapVars
o.heap: h.Macros
o.heap: h.ZapConsts
o.heap: h.Messages
o.boxes: s.boxes
o.boxes: h.ZapHeader
o.boxes: h.System
o.boxes: h.ZapLibrary
o.boxes: h.ZapVars
o.boxes: h.Macros
o.boxes: h.ZapConsts
o.boxes: h.Messages
o.boxes: h.Strings
o.boxes: h.CreateFile
o.boxes: h.CreateWind
o.boxes: h.Heap
o.boxes: h.KeyBits
o.boxes: h.Menus
o.boxes: h.StartCode
o.boxes: h.Undo
o.boxes: h.ModeBits
o.boxes: h.MiniBuff
o.boxes: h.Cursors
o.boxes: h.Template
o.boxes: h.TMTVars
o.boxes: h.Search
o.boxes: h.Redraw
o.fonts: s.fonts
o.fonts: h.ZapHeader
o.fonts: h.System
o.fonts: h.ZapLibrary
o.fonts: h.ZapVars
o.fonts: h.Macros
o.fonts: h.ZapConsts
o.fonts: h.Messages
o.fonts: h.Heap
o.fonts: h.Strings
o.fonts: h.CreateWind
o.fonts: h.TMTVars
o.fonts: h.CreateFile
o.fonts: h.ModeBits
o.exceptions: s.exceptions
o.exceptions: h.ModuleBits
o.exceptions: h.ZapHeader
o.exceptions: h.System
o.exceptions: h.ZapLibrary
o.exceptions: h.ZapVars
o.exceptions: h.Macros
o.exceptions: h.ZapConsts
o.exceptions: h.StartUp
o.exceptions: h.Strings
o.exceptions: h.StartCode
