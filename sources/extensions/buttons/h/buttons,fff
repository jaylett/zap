; Buttons header
; $Id: buttons,fff,v 1.2 2003/03/14 02:45:37 christian Exp $

; module workspace
		 ^	0
mode_blocks	 #	4				; array of mode resource blocks
mode_blocklen	 #	4				; length of above
buttons_blocks	 #	4				; array of open button bars
buttons_blocklen #      4				; length of above
numvars		 *	@

; w_info bits owned by Buttons implementations
winfo_buttons_on	*	1<<12			; buttons bars enabled


; syslogging macro

		GBLA	DebugCount
		GBLS	DC
DebugCount	SETA	0
DC		SETS	"log$DebugCount"

		MACRO
$la		DEBUGF	$t,$p
$la
		STMFD	R13!,{R0-R3,R8-R12,R14}
		ADRL	R0,zap
		ADR	R1,text$DC
		MOV	R2,#$p
		MOV	R3,R13
		SWI	XSysLog_LogFormatted
		B	jump$DC
text$DC		=	"$t",0
		ALIGN
jump$DC		LDMFD	R13!,{R0-R3,R8-R12,R14}

DebugCount	SETA	DebugCount+1
DC		SETS	"log$DebugCount"
		MEND


; Macro to add a new command into the table
		MACRO
$la		FNcom	$a,$b
$la		=	"$a",0				; command name
		ALIGN
		&	$b				; offset to code
		MEND



 END
