<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<!-- $Id: index.html,v 1.2 1999/02/18 14:11:44 dj Exp $ -->

<HEAD>
 <TITLE>Zap - CVS access</TITLE>
 <LINK REL=Stylesheet HREF="/style/main.css" TYPE="text/css">
 <LINK REL=Author HREF="mailto:webmaster@zap.uk.eu.org">
 <LINK REL=Copyright HREF="/copyright.html">
 <META NAME=Description CONTENT="Zap is a configurable programmers' editor for Acorn RiscOS">
 <META NAME=Keywords CONTENT="Zap, editor, text editor, Acorn, Risc OS, Tim Tyler, Darren Salt, Martin Ebourne, Dominic Symes, James Aylett">
</HEAD>

<BODY BACKGROUND="/img/background.gif"
      TEXT="#000000"
      BGCOLOR="#DCDCDC"
      LINK="#20209F"
      VLINK="#008000"
      ALINK="#FF2020">

<CENTER>
<IMG ALT="Site map" SRC="/img/zapbar.gif" BORDER=0 USEMAP="#map" WIDTH=600 HEIGHT=82>
</CENTER>

<H1>Zap CVS Tree</H1>

<P>
Zap's source tree is maintained under <A
HREF="http://www.cyclic.com/">CVS</A>, a version/revision control system
which lets multiple developers work on one source tree fairly easily. Access
to the CVS tree is available through two methods: firstly, via a <A
HREF="http://www.gallery.uk.eu.org/cgi-bin/cvsweb/zap/">web gateway</A>
which lets you browse the tree, and secondly through CVS 'pserver' (<A
HREF="#pserver">see
below</A>). Write access is only available to main Zap developers at present; if
you want to contribute material, send it to one of us (if you start sending
lots of useful stuff you'll be a main developer by default, and we'll give
you write access).
</P>

<P>
The files in the CVS tree are stored using Acorn's method for storing
filetypes under NFS, namely as &lt;filename&gt;,&lt;filetype&gt; with
&lt;filetype&gt; a three digit hex number with lower case letters. As such,
CVS access using pserver is mostly useful only to those who can subsequently
export the files over NFS to a RISC OS machine, doing the translation, or
who can <A HREF="#build-unix">build under Unix</A>. For those who can't, <A
HREF="ftp://ftp.zap.uk.eu.org/pub/unstable/snapshots/">daily snapshots</A>
of development work are generated automatically, both in source and binary
form.
</P>

<A NAME="pserver"></A>
<H2>pserver</H2>

<P>
People with the ability to run CVS can access the Zap tree through CVS's
remote access system, called 'pserver'. This isn't available for RISC OS, as
far as I know. The details are:
</P>

<UL>
 <LI>host: cvs.zap.uk.eu.org
 <LI>user: cvsuser
 <LI>CVS path: /home/cvs
 <LI>password: anonymous
 <LI>Entire CVS root (suitable for passing to cvs's -d option):
:pserver:cvsuser@cvs.zap.uk.eu.org:/home/cvs
</UL>

<P>
Quick guide to using CVS and pserver:
</P>

<OL>
 <LI><TT>cvs -d :pserver:cvsuser@cvs.zap.uk.eu.org:/home/cvs login</TT><BR>
  Prompts you for the password ('anonymous'). You only need to do this once
on most systems, because CVS will remember your password.
 <LI><TT>cvs -d :pserver:cvsuser@cvs.zap.uk.eu.org:/home/cvs checkout
zap</TT><BR>
  Checks out a complete copy of Zap. From then on, within the directory
structure that it creates, you don't need to specify the -d option - it will
remember the CVS root you are using. Note that the entire tree is quite big
- it includes various extensions as well as Zap itself. If you just want
part of it, a <A HREF="#modules">list of modules</A> is available below.<BR>
  Note that this will always give you the <EM>stable</EM> release of Zap.
 <LI><TT>cvs -d :pserver:cvsuser@cvs.zap.uk.eu.org:/home/cvs checkout -r
v1-41-devel zap/!ZapSource</TT><BR>
  As above, but checks out a copy of the development source for Zap.
 <LI><TT>cvs update</TT><BR>
  Brings your copy of the source in line with the latest version on the
server.
</OL>

<A NAME="modules"></A>
<H2>Modules</H2>

<DL>
 <DT>zap/!ZapSource
  <DD>The main Zap source code. Available tags:
   <UL>
    <LI>v1-41-devel (current development work)
    <LI>v1-40-patch8 (v1.40 patch 8)
    <LI>v1-40-patch7 (v1.40 patch 7)
   </UL>
 <DT>zap/!ZapBASIC
  <DD>ZapBASIC source code. Available tags:
   <UL>
    <LI>v1-34 (current development work)
    <LI>start (v1.40 compatible version)
   </UL>
 <DT>zap/!ZapConfig
  <DD>ZapConfig source code.
 <DT>zap/!ZapExtSrc
  <DD>Zap command extensions source code. Available tags:
   <UL>
    <LI>zap-v1-41 (current development, compatible with v1.41 and later; can
be built with v1.40 compatibility)
    <LI>start (v1.40 compatible version)
   </UL>
 <DT>zap/!ZapRedraw
  <DD>ZapRedraw source.
 <DT>zap/sja-notes
  <DD>James Aylett's notes on current progress / future ideas. This includes
the known bug list, but isn't always up to date (hopefully in the future
we'll have the bug and wish lists online in a better format).
 <DT>zap/docs
  <DD>Zap's documentation, including the tools needed to build it
</DL>

<A NAME="build"></A>
<H2>Building Zap</H2>

<P>
Makefiles are provided to build Zap using either <A
HREF="#build-acorn">amu/objasm/link</A> or
<A HREF="#build-free">make/AS/drlink</A> under RISC OS. In addition, tools for building the main Zap
code under <A HREF="#build-unix">Unix</A> (using make/AS under unix/drlink under unix) are available.
</P>

<A NAME="build-acorn"></A>
<H3>Building using Acorn tools</H3>

<P>
There are two ways of building Zap using the Acorn tools. The first is more
automated, but the second is the prefered system. You will need objasm
v3.06, link v5.06 and amu v5.02 (earlier versions may work as well).
</P>

<OL>
 <LI>Double click on !Zap.!Makefile. This runs two separate Makefiles to
build Zap.
 <LI>From a taskwindow, while in the !Zap directory, run <TT>amu</TT>. This
will build Zap with the standard build name (to get another build name, use
<TT>amu BUILD=foo</TT> or <TT>amy BUILD=foo-42</TT>).<BR>
  The amu Makefile actually has a number of different targets. The following
are available:
  <UL>
   <LI><TT>amu Zap</TT> - build Zap itself
   <LI><TT>amu ZapHdrs</TT> - rebuild Zap's headers; you'll probably need to
do this the first time you get the source. You'll also need to do this if
the inter-file exports change; basically, if things aren't building right,
try running this.
   <LI><TT>amu Clean</TT> - clean out all temporary files (but not the
generated header files)
   <LI><TT>amu Rebuild</TT> - wipe o.ModuleBits and rebuild (ensures the the build name is correct)
   <LI><TT>amu Revision</TT> - stamps h.Version (to make sure that a version
number change ensures a consistent rebuild)
  </UL>
</OL>

<A NAME="build-free"></A>
<H3>Building using free RISC OS tools</H3>

<P>
Again, there are two ways of building Zap using the free RISC OS tools. You
will need AS v1.30, drlink v0.30 and make v1.02 (earlier versions of AS
almost certainly won't work; get the latest version from <A
HREF="http://www.youmustbejoking.demon.co.uk/">Darren's website</A>). The
others are available from <A HREF="http://micros.hensa.ac.uk/">Hensa</A>.
</P>

<OL>
 <LI>Double click on !Zap.!MakeAS. This doesn't always work, and the second
method is better anyway.
 <LI>From a taskwindow, while in the !Zap directory, run <TT>make -r -f
MakefileAS</TT>. This
will build Zap with the standard build name (to get another build name, use
<TT>make -r -f
MakefileAS BUILD=foo</TT> or <TT>make -r -f
MakefileAS BUILD=foo-42</TT>).<BR>
  The AS Makefile actually has a number of different targets. The following
are available:
  <UL>
   <LI><TT>make -r -f
MakefileAS Zap</TT> - build Zap itself
   <LI><TT>make -r -f
MakefileAS ZapHdrs</TT> - rebuild Zap's headers; you'll probably need to
do this the first time you get the source. You'll also need to do this if
the inter-file exports change; basically, if things aren't building right,
try running this.
   <LI><TT>make -r -f
MakefileAS Clean</TT> - clean out all temporary files (but not the
generated header files)
   <LI><TT>make -r -f Rebuild</TT> - wipe o.ModuleBits and rebuild (ensures the the build name is correct)
   <LI><TT>make -r -f
MakefileAS Revision</TT> - stamps h.Version (to make sure that a version
number change ensures a consistent rebuild)
  </UL>
</OL>

<A NAME="build-unix"></A>
<H3>Building under Unix</H3>

<P>
There is only one method for building under Unix. You will need AS v1.30,
built for your Unix, available in your path as <TT>as_ro</TT>, drlink
v0.3.4, built for your Unix, available in your path as <TT>link_ro</TT>,
perl v5, sed v2.05 and make v3.76.1. Perl is available from <A
HREF="http://www.perl.com/">www.perl.com</A>; sed and make are available
from <A HREF="http://www.fsf.org/">The FSF</A>. as_ro can be built from the
source, or we can supply it pre-built for ELF i386 linux; link_ro can
probably be supplied pre-built for ELF i386 linux on request, but we do not
have permission to distribute the source code. (Alternatively, if you have
access to ARM's development kit, you can hack data/unix/Makefile to use that
instead; you'll need to change the <TT>asm</TT>, <TT>link</TT>,
<TT>asmflags</TT> and <TT>linkflags</TT> variables in the makefile, near the
bottom of the [System] section.)
</P>

<P>
The command to run, from within the !Zap directory, is <TT>make -f
data/unix/Makefile</TT>. This gives the default build name; you can use <TT>make -f
data/unix/Makefile BUILD=foo</TT> and <TT>make -f
data/unix/Makefile BUILD=foo-42</TT> as above.
</P>

<HR>

<ADDRESS>
<A HREF="/copyright.html">&copy; Copyright Zap Developers 1999. All rights reserved.</A>
<BR>Updated: $Date: 1999/02/18 14:11:44 $. <A HREF="mailto:webmaster@zap.uk.eu.org">webmaster@zap.uk.eu.org</A>
</ADDRESS>

<MAP NAME="map">
<AREA ALT="Latest release" SHAPE=RECT COORDS="463,7,585,25" HREF="ftp://ftp.zap.uk.eu.org/pub/stable/zap.zip">
<AREA ALT="Download" SHAPE=RECT COORDS="497,35,586,52" HREF="/download.html">
<AREA ALT="Documentation" SHAPE=RECT COORDS="275,7,405,25" HREF="/documentation/">
<AREA ALT="Contact" SHAPE=RECT COORDS="335,35,405,52" HREF="/contact.html">
<AREA ALT="Zap homepage" SHAPE=RECT COORDS="58,0,102,81" HREF="/">
</MAP>

</BODY>

</HTML>
